<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>My Backbone Tutorials</title>
        <link href="../../_assets/main/css/normalize.css" rel="stylesheet" />
        <link href="../../_assets/main/css/main.css" rel="stylesheet" />
    </head>
    <body>
        <!-- user template -->
        <script type="text/template" id="userTemp">
            <div>
                <label>ID         </label> :    <strong><%= ID %>         </strong>
                <label>User Name  </label> :    <strong><%= UserName %>   </strong>
                <label>Full Name  </label> :    <strong><%= FullName %>   </strong>
                <label>Pasword    </label> :    <strong><%= Password %>   </strong>    
                <label>E-posta    </label> :    <strong><%= Eposta %>     </strong>    
            </div>
        </script>
        
        <!-- post template -->
        <script type="text/template" id="postTemp">
            <div>
                <label>ID            </label> :           <strong><%= ID %>         </strong>
                <label>Title         </label> :           <strong><%= Title %>      </strong>
                <label>Content       </label> :           <strong><%= Content %>    </strong>
                <label>Date          </label> :           <strong><%= Date %>       </strong>    
                <label>UserID        </label> :           <strong><%= UserID %>     </strong>    
            </div>
        </script>
            
        <script src="../../_assets/main/js/libs/jquery-1.11.2.js"></script>
        <script src="../../_assets/main/js/libs/underscore.js"></script>
        <script src="../../_assets/main/js/libs/backbone.js"></script>
        
        <strong>USERS</strong><br><br>
        <div id="users"></div>
        
        <br><br><br>
        <strong>POST</strong>
        <br><br>
        <div id="posts"></div>
        <br><br>
        <div id="result"></div>
        
        
        <script type="text/javascript">
            /* user model */
            var User = Backbone.Model.extend({
                defaults: {
                	"ID": 0,
                	"UserName": "",
                	"FullName": "",
                	"Password": "",
                	"Eposta": ""
                },
                initialize: function(){
                    console.log("User Model is Init");
                }
            });
            
            /* post model */
            var Post = Backbone.Model.extend({
                defaults: {
                	"ID": 0,
                	"Title": "",
                	"Content": "",
                	"Date": "",
                	"UserID": 0
                },
                initialize: function(){
                    console.log("Post Model is Init");
                }
            });
            
            
            /* users collection */
            var Users = Backbone.Collection.extend({
                Model: User,
                initialize: function(){
                    console.log("Users Collecton is Init");
                }
            });
            
            /* posts collection */
            var Posts = Backbone.Collection.extend({
                Model: Post,
                initialize: function(){
                    console.log("Posts Collection is Init");
                }
            });
            
            
            /* user view */
            var UserItemView = Backbone.View.extend({
                template: _.template( $("#userTemp").html()),
                initialize: function(){
                    console.log("UserView is init");
                    this.render();
                },
                render: function(){
                    this.$el.html(this.template(this.model.toJSON()));
                }
            });
            
            /* post view */
            var PostItemView = Backbone.View.extend({
                template: _.template( $("#postTemp").html() ),
                initialize: function(){
                    console.log("PostView is init");
                    
                    this.render();
                },
                render: function(){
                    this.$el.html( this.template(this.model.toJSON()) );
                }
            });
            
            /* model */
            var user = new User({ 
                ID: 5,
                UserName: "edü", 
                FullName: "büdü", 
                Password: "şifrem", 
                Eposta: "epostam"
            });
            
            var post = new Post({
                ID: 3,
                Title: "title test",
                Content: "title content",
                Date: "12.12.12",
                UserID: 0
            });
            
            /* collection */
            var users = new Users(user);
            var posts = new Posts(post);
            
            /* view */
            var userItemView = new UserItemView({ el: $("#users"), model: user });
            var postItemView = new PostItemView({ el: $("#posts"), model: post });
            
            
        </script>
    </body>
</html>